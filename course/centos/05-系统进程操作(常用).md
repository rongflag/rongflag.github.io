## 05-系统进程

### 1. w 显示目前登入系统的用户信息

```
# w  // 显示当前用户登录信息及执行的命令
19:50:14 up 9:27, 4 users, load average: 0.31, 0.26, 0.18
USER   TTY   FROM       LOGIN@  IDLE  JCPU  PCPU WHAT
root   tty7   :0        Thu12  31:39m 10:10  0.60s gnome-session
root   pts/0  :0.0       17:09  2:18m 15.26s 0.15s bash
root   pts/1  192.168.1.17   18:51  1.00s 1.24s 0.14s -bash
root   pts/2  192.168.1.17   19:48  60.00s 0.05s 0.05s -bash
```

功能：显示目前登入系统的用户信息。

> ​	第一行 是设备运行时间 也可以用uptimeshi'jian
>
> load average 是负载 后面三个值是 1分钟平均负载  5分钟平均负载 15分钟平均负载
>
> tload 绘制负债图  横坐标时间  纵坐标是负载高低
>
> 下面意义
>
> USER 用户名
>
> TTY 图形终端  :0 就是本地    tty几就是  tty第几个终端
>
> FROM：来自哪里
>
> Login@： 登录时间
>
> IDEL: 多久没活跃了
>
> JCPU ：该终端所有进程使用的CPU时间
>
> PCPU  cpu执行当前进程使用时间
>
> WHAT：正在执行什么

| 命令 | 功能                                                         | 备注 |
| ---- | ------------------------------------------------------------ | ---- |
| -f   | 开启或关闭显示用户从何处登入系统。                           |      |
| -h   | 不显示各栏位的标题信息列。                                   |      |
| -l   | 使用详细格式列表，此为预设值。                               |      |
| -s   | 使用简洁格式列表，不显示用户登入时间，终端机阶段作业和程序所耗费的CPU时间。 |      |
| -u   | 忽略执行程序的名称，以及该程序耗费CPU时间的信息。            |      |
| -V   | 显示版本信息                                                 |      |
|      |                                                              |      |

### 2. ps 命令用于显示当前进程的状态

功能：命令用于显示当前进程的状态

基础命令：ps -options

格式：USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND

> USER: 行程拥有者
>
> PID: pid
>
> %CPU: 占用的 CPU 使用率
>
> %MEM: 占用的记忆体使用率
>
> VSZ: 占用的虚拟记忆体大小
>
> RSS: 占用的记忆体大小
>
> TTY: 终端的次要装置号码 (minor device number of tty)
>
> STAT: D: 无法中断的休眠状态 (通常 IO 的进程)
>
> ​			R: 正在执行中
>
> ​			S: 静止状态
>
> ​			T: 暂停执行
>
> ​			Z: 不存在但暂时无法消除
>
> ​			W: 没有足够的记忆体分页可分配
>
> ​			<: 高优先序的行程
>
> ​			N: 低优先序的行程
>
> ​			L: 有记忆体分页分配并锁在记忆体内 (实时系统或捱A I/O)
>
> START:行程开始时间
>
> TIME: 执行的时间
>
> COMMAND:所执行的指令

| 命令                              | 功能                                     | 备注 |
| --------------------------------- | ---------------------------------------- | ---- |
| ps -ef \| grep 进程关键字         |                                          |      |
| ps -A                             | 查看所有进程                             |      |
| ps -u root                        | //显示root进程用户信息                   |      |
| ps -ef                            | 显示所有命令，连带命令行                 |      |
| ps -aux \|less                    | 通过cpu和内存来过滤进程  排序再加 --sort |      |
| ps -aux  --sort  -pcpu \|less     | 按照cpu降序排列                          |      |
| ps -aux  --sort  -pmem \|less     | 按照使用内存降序排列                     |      |
| ps -aux --sort -pcpu,+pmem \|head | 综合按照内存和cpu使用显示前10个          |      |
| pstree                            | pstree                                   |      |

### 3. top 实时显示 process 的动态

功能：实时显示 process 的动态

基础命令: top [-] [d delay] [q] [c] [S] [s] [i] [n] [b]

> ​	d : 改变显示的更新速度，或是在交谈式指令列( interactive command)按 s
>
> q : 没有任何延迟的显示速度，如果使用者是有 superuser 的权限，则 top 将会以最高的优先序执行
>
> c : 切换显示模式，共有两种模式，一是只显示执行档的名称，另一种是显示完整的路径与名称
>
> S : 累积模式，会将己完成或消失的子行程 ( dead child process ) 的 CPU time 累积起来
>
> s : 安全模式，将交谈式指令取消, 避免潜在的危机
>
> i : 不显示任何闲置 (idle) 或无用 (zombie) 的行程
>
> n : 更新的次数，完成后将会退出 top
>
> b : 批次档模式，搭配 "n" 参数一起使用，可以用来将 top 的结果输出到档案内
>
> 键盘快捷按键:
>
> q:退出top
>
> h：帮助文档
>
> u: 按照用户过滤
>
> b/B：加粗信息
>
> f/F：在进程列表中添加或删除某些列，修改排序参照的列
>
> u:按照用户来过滤
>
> k:结束进程
>
> s:改变刷新时间

| 命令 | 功能 | 备注 |
| ---- | ---- | ---- |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |

监控linux软件 glances iftop  htop

> sudo yum install -y epel*
>
> yum install glances -y
>
> yum  install -y htop 
>
> 

### 4. kill 杀死进程

功能：杀死进程

基础命令

终端中：Ctrl + C 关闭当前进程

> ​	终端中 复制是 Ctrl +Shift + C 粘贴 Ctrl +shift +v

关闭其他： kill PID1  PID2 PID3

kill -9 立即抢自己结束进程  kill -9 -PID 暴力结束

killall: 同一个程序运行时可能启动多个进程  同时关闭

killall 程序名称

### 5. halt 关闭系统  

功能：关闭系统 需要管理员权限

poweroff 关闭系统不需要root权限

### 6. reboot 重启系统

### 7.shutdown  关闭和重启都用的这个

### 8.&

功能：让进程后台运行

> 前台进程：运行程序 展示终端，不能运行其他

基础命令：命令后面加&就可以

例如： cp file1.txt file1_new.txt &

缺点与与终端强管理 终端关闭所有后台进程关闭

### 9.nohub   使进程与终端分离

功能：使进程与终端分离

基础命令：nohup  运行命令

> ​	可以与&搭配使用 既是后台进程又与终端分离

### 10.Ctrl+Z,jobs,bg和fg控制进程前后台切换

功能：使进程前后台运行并且可以暂停进程

基础命令:首先 Ctrl +Z 使进程后台暂停  然后 bg唤醒 后台进程

bg: 1.使进程转入后台；2.如果进程是暂停的，那么就运行；3.默认是第一个进程，可以加 bg %1 可以不带% 直接1，2

### 11. jobs  显示终端后台进程

功能：显示当前终端的后台进程状态

基础命令：jobs

### 12.fg 是后台进程放进前台

功能：使后台进程变成前台

基础命令： fg %1 %2 或者(1，2) ，不填就是第一个

