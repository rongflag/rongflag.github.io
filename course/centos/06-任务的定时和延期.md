## 06-任务的定时和延期

### 1. date 时间输出

功能：输出时间

基础命令：

> ​	时间方面：
>
> - % : 印出 %
> - %n : 下一行
> - %t : 跳格
> - %H : 小时(00..23)
> - %I : 小时(01..12)
> - %k : 小时(0..23)
> - %l : 小时(1..12)
> - %M : 分钟(00..59)
> - %p : 显示本地 AM 或 PM
> - %r : 直接显示时间 (12 小时制，格式为 hh:mm:ss [AP]M)
> - %s : 从 1970 年 1 月 1 日 00:00:00 UTC 到目前为止的秒数
> - %S : 秒(00..61)
> - %T : 直接显示时间 (24 小时制)
> - %X : 相当于 %H:%M:%S
> - %Z : 显示时区
>
> 日期方面：
>
> - %a : 星期几 (Sun..Sat)
> - %A : 星期几 (Sunday..Saturday)
> - %b : 月份 (Jan..Dec)
> - %B : 月份 (January..December)
> - %c : 直接显示日期与时间
> - %d : 日 (01..31)
> - %D : 直接显示日期 (mm/dd/yy)
> - %h : 同 %b
> - %j : 一年中的第几天 (001..366)
> - %m : 月份 (01..12)
> - %U : 一年中的第几周 (00..53) (以 Sunday 为一周的第一天的情形)
> - %w : 一周中的第几天 (0..6)
> - %W : 一年中的第几周 (00..53) (以 Monday 为一周的第一天的情形)
> - %x : 直接显示日期 (mm/dd/yy)
> - %y : 年份的最后两位数字 (00.99)
> - %Y : 完整年份 (0000..9999)

常用命令

> ​	
>
> ```
> # date
> 三 5月 12 14:08:12 CST 2010
> # date '+%c' 
> 2010年05月12日 星期三 14时09分02秒
> # date '+%D' //显示完整的时间
> 05/12/10
> # date '+%x' //显示数字日期，年份两位数表示
> 2010年05月12日
> # date '+%T' //显示日期，年份用四位数表示
> 14:09:31
> # date '+%X' //显示24小时的格式
> 14时09分39秒
> # date '+usr_time: $1:%M %P -hey'
> usr_time: $1:16 下午 -hey
> ```

#### 1. 设定时间

```
date --date '12:34:56'
```

### 2.at 延时执行一个命令

功能：延时执行一个命令  只能执行一次

> ​	sudo yum install at 

基础命令： at 时间   ====》执行命令==》Ctrl + D退出

> ​	日期格式  at 22:10 12/10119 时:分  月:日:年

指定间隔： at now + 10minutes

> hours  days  weeks  months  years

### 3. atq 列出任务

功能：atq列出任务

基础命令：atq

### 4.atrm 删除任务

功能：删除延时任务

基础命令：atrm 任务编号

### 5.sleep 休息一下

功能：可以用分号隔开多个命令，使之一个接一个运行

基础命令：touch file1.txt;sleep 10s;rm file.txt

> s m h d  秒 分 小时  日

### 6. &&和||符号

功能：&&号前命令执行成果 才会执行后续命令

​			||号前命令执行失败 才厚之后后续命令

​			分号：不论分号前的命令执行成功与否，都执行分号后的命令

### 7.crontab 定时执行程序

功能：定时执行程序，可以重复执行命令

> ​	sudo yum install vixie-cron crontabs
>
>  chkconfig crond on  #开机启动
>
> service crond start #启动

基础命令：

- -e : 执行文字编辑器来设定时程表，内定的文字编辑器是 VI，如果你想用别的文字编辑器，则请先设定 VISUAL 环境变数来指定使用那个文字编辑器(比如说 setenv VISUAL joe)
- -r : 删除目前的时程表
- -l : 列出目前的时程表

命令格式：m h dom(day of month) mon dow(day of week) command

| 分钟 | 小时 | 日   | 月份 | 星期几             | 命令 |
| ---- | ---- | ---- | ---- | ------------------ | ---- |
| 0-59 | 0-23 | 1-31 | 1-12 | 星期日是0 （0到6） |      |
|      |      |      |      |                    |      |

cron 格式

*/10 * * * 1-5 command  每周一到周5 的每个10

倍数分钟执行命令 